%!/psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-1995
 *               All Rights Reserved
 *  $RCSfile: Macro.cfg,v $
 * $Revision: 1.2 $
 *   $Author: olivas $
 *     $Date: 2013/10/27 08:15:29 $
 *    $State: Exp $
 *   Purpose: Logic for DELite VolumeControl
 * * * * * * * * * * * * * * * * * * *
 */
#if (DEMAJOR == 6 && DEMINOR >= 5) || DEMAJOR > 6
	symbol  CurrVolume
	symbol  VolumeIcon
	macro   doVolumeControl	eq? $(VolumeControl enabled) yes VolumeControl show
	macro	GetVolumeLevel	ne? $(CurrVolume) $(VolumeControl beeperlevel) SetVolumeIcon;\
				WinMgr:after:5:GetVolumeLevel
	macro	SetVolumeIcon	CurrVolume $(VolumeControl beeperlevel);\
				eq? $(CurrVolume) 1 VolumeIcon VolLow;\
				eq? $(CurrVolume) 2 VolumeIcon VolMed;\
				eq? $(CurrVolume) 3 VolumeIcon VolHigh;\
				StatBar.Sound icon:$(VolumeIcon);\
				WinMgr:after:5:GetVolumeLevel;
	macro	InitVolumeControl	eq? $(VolumeControl enabled) no  Statbar.Sound icon:"";\
					eq? $(VolumeControl enabled) yes GetVolumeLevel;
#else
	macro	InitVolumeControl	StatBar.Sound icon ""
#endif
