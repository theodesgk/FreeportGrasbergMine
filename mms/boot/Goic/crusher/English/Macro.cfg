#!/psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-1995
 *               All Rights Reserved
 *  $RCSfile: Macro.cfg,v $
 * $Revision: 1.7 $
 *   $Author: dcitron $
 *     $Date: 2014/07/02 06:06:49 $
 *    $State: Exp $
 *   Purpose: GOIC object configuration file.
 * * * * * * * * * * * * * * * * * * *
 */
/* this defines a macro that gets substituted into the Goic/English/Macro
     so that same code can be used in foreman and excav class equipment */
#define dEQREQ	SHOVEL-REQ
#include <Goic/English/Macro.cfg>
out     DELAY   0x07    d      req delay;ob1 $1;eq? "$(hasbays)" "1" sendaction;eq? "$(hasbays)" "0" sendto up
out     DOWN    0x08    d      req down;ob1 $1;eq? "$(hasbays)" "1" sendaction;eq? "$(hasbays)" "0" sendto up
out     READY   0x09    d      req ready;ob1 $1;eq? "$(hasbays)" "1" sendaction;eq? "$(hasbays)" "0" sendto up
out     STANDBY 0x0a    d      req standby;ob1 $1;eq? "$(hasbays)" "1" sendaction;eq? "$(hasbays)" "0" sendto up
in      KSTATE  0x41    b?ssssss state $1;w0.v1 label:$2;w0.v2 label:$3;w0.Text write:$5\n;WinMgr audio:$7
in      KSTATE2  0x32    b?ssssss state $1;w0.v1 label:$2;w0.v2 label:$3;w0.Text write:$5\n;WinMgr audio:$7
bufsize 2048
symbol	lastloc
symbol	temploc
macro   Init    Macro KSTATE:0
symbol hasbays  0
symbol ps_recv
macro kpPrestart ps_recv 1
stack	8192
macro postbays menutype Bays;menuselect sendbays;Bays action:menuaction post
macro sendbays id $1;args 2;poststatus
macro poststatus updtselect statupdate;menutype Status;more 1;Status action:menuaction post
#define OBJECT Macro
#include <Cfg/Options.cfg>
