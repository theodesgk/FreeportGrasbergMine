%!/psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-1995
 *               All Rights Reserved
 *  $RCSfile: Main.cfg,v $
 * $Revision: 1.21 $
 *   $Author: olivas $
 *     $Date: 2013/08/20 17:49:25 $
 *    $State: Exp $
 *   Purpose: Main configuration script for mobile communications hub.
 * * * * * * * * * * * * * * * * * * *
 */
#include <Version.h>
#include <Boot/Config.h>
#define MAIN Main
#if defined(UP)
#	if #up(Slip)
#		undef MAIN
#		define MAIN MainSlip
#	elif #up(Loop)
#		undef MAIN
#		define MAIN MainLoop
#	elif #up(Can)
#		undef MAIN
#		define MAIN MainCan
#	endif
#elif #arch(mlink)
#	assert up(Prism)
#elif #arch(gsp) || #arch(gspcan)
#	assert up(Slip)
#elif #arch(sscan)
#	assert up(Wit)
#elif #arch(ssloop)
#	assert up(Wit)
#else
#	if #arch(hub) && (#arch(r23s) || #arch(r1s) || #arch(r2s))
#		assert up(Stas)
#	else
#		assert up(Rp)
#	endif
#endif
#if #arch(gspcan)
#	assert module(Can)
#elif #arch(hubcan) || #arch(sscan)
#	assert module(Can_2)
#endif
#include <Main/UpPort.h>
version	Hub, vVERSION
#define PROMPT	\'CLASS Hub, vVERSION (%s)> \'
#include <Main/ObjSh.h>
#include <Main/Adc.h>
/*
 * include PortEmbedded specific object instantiation commands
 */
#if #arch(pe)
#	include <PortEmbedded/Main.cfg>
#endif
/*
 * It's important to configure the Router object before OMS so that
 * OMS.cfg can reference the interfaces instantiated by Router.
 */
module	Router
object	Router path:y
#include <Main/OMS.h>
module	Macro
object	Macro path:y
#if #arch(hub) || #arch(hubcan) || #arch(mlink) || #arch(pe)
	module	Vsms
	object	Vsms
#endif
#define OBJECT Main
#include <Cfg/Options.cfg>
#if #arch(hubcan) || #arch(mlink) || #arch(pe)
#	include <Spooler/Main.cfg>
#endif
#if #arch(pe.net)
        module	Vga
	object	Vga
#	if (DEMAJOR == 6 && DEMINOR >= 5) || DEMAJOR > 6
		module AccSwitch
		object AccSwitch
#	endif
#endif
