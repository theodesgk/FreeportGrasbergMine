%!/psw/cpp
#if !#option(StoreForward)
	out	RFID-ARRIVE	0x0601	dd	rfArrive.$(rfOpt)
	out	RFID-DEPART	0x0602	dd	rfDepart.$(rfOpt)
	in	RFID-DEBUG	0x0603	b	rfOpt $1
	symbol	rfOpt 0
	macro	rfArrive.0	sendto up
	macro	rfArrive.1	sendto Goic;RfTag tagId:0
	macro	rfDepart.0	sendto up
	macro	rfDepart.1	sendto Goic
#endif

#if #arch(cgc)
#ifndef LANGUAGE
#	define LANGUAGE English
#endif
#define LANG_FILE	<TagReader/LANGUAGE/Macro.cfg>
#include LANG_FILE
symbol	ReadStat	1
macro	SetReader0	TagReader turnOffReader:0;ReadStat 1;w0.Text write:'$(ReaderOn)\n';setLabelOn
macro	SetReader1	TagReader turnOffReader:1;ReadStat 0;w0.Text write:'$(ReaderOff)\n';setLabelOff
macro	ToggleReader	SetReader$(ReadStat)
#if defined NEWUI && !defined UGUI
macro	setLabelOn	UpdateStatBar "Wifi" $(TagOn)
macro	setLabelOff	UpdateStatBar "Wifi" $(TagOff)
#else
macro	setLabelOn	w0.wifi label:$(TagOn);w0.wifi colors:greenButton
macro	setLabelOff	w0.wifi label:$(TagOff);w0.wifi colors:redButton
#endif
symbol	READER_BUTTON	1
macro	TagReaderButton	eq? $(READER_BUTTON) 1 ToggleReader;ne? $(READER_BUTTON) 1 w0.Text write:"$(ReaderDisabled)\n"
macro	InitReader	SetReader0
#endif
