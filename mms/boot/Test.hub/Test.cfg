#!/psw/cpp
#include <Version.h>
#ifndef UP
#	define UP Slip
#endif
up	UP
connected y
module	ObjSh
module	Pulse
module	File
object	ObjSh base:Test prompt:\'Hub Test, vVERSION> \'
#if #up(Loop)
	module	Slip
#else
	object	LoopTest name:Loop termin:0
#endif
object	Adc
object	Rp
object	Slip port:scc1a name:Gsp speed:4800
object	Pulse name:Pc0 counter:0
object	Pulse name:Pc1 counter:1
object	File path:y
#ifdef LOC
	module	Macro
	object	Macro path:y
#endif
#if #loc(Sk8) || #loc(Dsm) || #loc(Tsip) 
	module GpsTsip
	object GpsTsip name:Gps port:scc1b speed:9600 flags:0xc8 hdwe:rs232
#elif #loc(Moto) || #loc(Motorola) 
	module GpsMoto
	object GpsMoto name:Gps port:scc1b speed:9600 flags:0x8
#elif #loc(GG24) || #loc(Ashtech)
	module GpsGG24
	object GpsGG24 name:Gps port:scc1b speed:9600 flags:0x8
#elif #loc(G12)
	module GpsNMEA
	object GpsNMEA name:Gps port:scc1b speed:9600 flags:0x8 commandFile:ram0/g12.rover
	module GpsRTCM
	object GpsRTCM port:xil0
#endif
#ifdef LOC
	module GpsTruck
	object BeaconDB base:Gps
	object GpsTruck base:Gps
#endif
#ifdef TAG
	module RfTag
	object RfTag port:scc1b speed:9600 arriveCt:1 departCt:20 pollInt:150 readerId:1 maxTags:32
	object Pio name:Pio2 addr:2 type:8574 clear:0x1
#endif
mode	hub
#if !#option(Ate)
ssn	""
/*
 * Don't test the memory for final test to speed up the test.
 */
#if !#option(Final)
	rom	x
	ram	x
	flash	x
	e2rom	x
#endif
e2pot	x
adc	x
chan	x
pio	x
pulse	0
pulse	1
ping	Gsp:rs232
ping	Gsp:rs485
ping	Gsp:20ma
ping	Loop

/*
 * Use spray instead of ping for Rma and Ate tests, since we don't
 * have a remote router to talk to.  Disable PTT so that the radio
 * doesn't key up...
 */
#if #option(Rma)
	noptt	y
	spray	Rp
#	else
	ping	Rp
#	endif
done	x
#endif

