%!/psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-1998
 *               All Rights Reserved
 *  $RCSfile: Macro.cfg,v $
 * $Revision: 1.3 $
 *   $Author: latum $
 *     $Date: 2006/08/25 21:49:31 $
 *    $State: Exp $
 *   Purpose: Macro configuration file for GpsRover interface.
 * * * * * * * * * * * * * * * * * * *
 */
in	GPS-QUERY  0x1a8 d,s	 GpsRover query:$1
in	GPS-TESTMODE 0x1aa d	 GpsRover testTm:$1
in	HPGPS-QUERY 0x1e6 v,s	return $(Gps gps:cSatNum) $(Gps2 gps:cSatNum) $(Gps gps:sigmaRadius) $(Gps2 gps:sigmaRadius)

out     GPS-STATE       0x199   ddldddf  sendto Goic
in	GPS-SREQ	0x198	s	SendGpsStat

symbol	rcvr 0

#if #class(shovel) || #class(drill)
macro	SendGpsStat	rcvr 1; SendGps;\
			rcvr 2; SendGps;
#else
macro	SendGpsStat	rcvr 1; SendGps
#endif

macro	SendGps		GPS-STATE $(rcvr) $(GpsStat numOfSat$(rcvr)) $(GpsStat diffAge$(rcvr)) \
			$(GpsStat hError$(rcvr)) $(GpsStat vError$(rcvr)) \
			$(GpsStat quality$(rcvr)) $(GpsStat dop$(rcvr))

