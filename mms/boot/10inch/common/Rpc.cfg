#!/psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-1995
 *               All Rights Reserved
 *  $RCSfile: Rpc.cfg,v $
 * $Revision: 1.11 $
 *   $Author: schultes $
 *     $Date: 2019/06/11 01:03:03 $
 *    $State: Exp $
 *   Purpose: Generic RPC definitions for GOIC.  Each client will
 *            probably want to override some or all of these.
 * * * * * * * * * * * * * * * * * * *
 */
 
/*  Out Rpcs   */
out	ASSIGN		0x01	d?[s][s]	doAssign
out	ARRIVE		0x02	d?[s][s]	doArrive
out	LOAD		0x03	d?[s][s]	doLoad
out	LOGON		0x04	s	doLogon
out	FUEL		0x05	d?d	doFuel
out	HELP		0x06	d	doHelp
#ifdef GPSTAGACT
#if DEMAJOR >= 6 && ((DEMINOR >= 6 && DEMAINT >= 8) || DEMINOR >= 7)
in	DELAY		INT_RPC	d	DELAYGPS "$1" [ $(GpsTruck x) $(GpsTruck y) $(GpsTruck z) $(GpsTruck velocity) $(GpsTruck status) ]
in	DOWN		INT_RPC d	DOWNGPS "$1" [ $(GpsTruck x) $(GpsTruck y) $(GpsTruck z) $(GpsTruck velocity) $(GpsTruck status) ]
in	READY		INT_RPC	d	READYGPS "$1" [ $(GpsTruck x) $(GpsTruck y) $(GpsTruck z) $(GpsTruck velocity) $(GpsTruck status) ]
in	STANDBY		INT_RPC	d	STANDBYGPS "$1" [ $(GpsTruck x) $(GpsTruck y) $(GpsTruck z) $(GpsTruck velocity) $(GpsTruck status) ]
out	DELAYGPS	0x07	d?[s]	doDelay
out	DOWNGPS		0x08	d?[s]	doDown
out	READYGPS	0x09	d?[s]	doReady
out	STANDBYGPS	0x0a	d?[s]	doStandby
#else
out	DELAY		0x07	d?[s]	doDelay
out	DOWN		0x08	d?[s]	doDown
out	READY		0x09	d?[s]	doReady
out	STANDBY		0x0a	d?[s]	doStandby
#endif
#else
out	DELAY		0x07	d?[s]	doDelay
out	DOWN		0x08	d?[s]	doDown
out	READY		0x09	d?[s]	doReady
out	STANDBY		0x0a	d?[s]	doStandby
#endif
out	RECALL		0x0b	v	doRecall
out	DEFECT		0x0e	d	doDefect
out	SELFASN		0x0f	s	doSelfAsn
out	FULL		0x10	s?s[s][s]	doFull
out	MESSAGE		0x19	s?s	doMessage
out	EQ-REQ		0x30	s?[s]   doEqReq
out	PRESTART	0x31	ds[b]	doPrestart
/* out	EXCEPT_REPLY	0x39	s	sendto up  For Classic Dispatcherless; Not Supported */
out	PANFULL		0x1d6	[l]	doPanfull
out	NOOK		0xfa	v	doNoOk
out	PWRUP		0xf1	s	doPwrUp
out	REQ-MENU	0xc0	d	doReqMenu
out	REPT-REQ	0x290	ss	doReptReq
out	SFDATA  	0x78b	ss?s	sendto up spooledonly  /* Store and Forward summary RPC */
out	KBCST		0x4a	bss	sendKbcst
out     VS-EVENT        0x0772  l?fddd  sendto up

/*  In Rpcs  */
in	GCDO		0x0c	s		$1
in	KBCST   	0x4a    bss     	doKbcst
in	KACK		0x46	b?s		doKack
in	KDACK		0x5b	s		doKdack
in	KASK		0x43	s?sss		doKask
in	KAUDIO		0x60	s		doKaudio
in	KMENU		0x49	s[s]		doKmenu
in	KMENU2		0x61	s[s]		doKmenu2
in	KMENCLR		0x62	ss[s]		doKmenclr
/* in	MESSAGE-IN	0x63	s?s		DoMessageIn  ProVision 2;Not supported */
in	KCOLOR		0x01f	sss		doKcolor
in	KMATL		0x44	sb		doKmatl
in	KTABLE		0x4b	ss[s]	doKtable
in	KTABLE2		0x4c    ssd[s]	doKtable2
in	KBEEP		0x5a	b		doKbeep
in	KSTATE		0x41	b?ssssss	doKstate
in	KSTATE2		0x32	b?ssssss	doKstate2
in	KSTATE3		0x33	b?ssssss	doKstate3
in	KDISP		0x40	s		doKdisp
in	CP-SWITCH	0x18a	b		doCpSwitch
/* in	VIMS-DIPPER2	0x28	d		doVimsDip  Old Interface;Not supported */
in	MAYDAY		0x64	sss		doMayday

/*
 * currently Drills not supported on 10inch PTX
#if #class(drill)
out	COMPONENT	0x20	bsb	sendto up
out	STARTHOLE	0x21	ssssss	sendto up
out	ENDHOLE		0x22	s	sendto up
out	ZERO		0x23	s	sendto up
out	PATTERN		0x25	s	sendto up
in	KDRILL		0x5d	sss	getKdrill  // add
out	VRATES		0x92	d	sendto up
out	VSHAFT		0x94	d	sendto up
#endif
*/

/* Rpcs passed between Hub and GC */
in      TOGC    0x26    s       $1
/* since Hub and Goic exist on same device for PTX and MLX
 * we need to define TOHUB a little differently
 */
#if #arch(pe)
out	TOHUB	0x27	s?s	$1
#else
out	TOHUB	0x27	s?s	sendto Can.0
#endif
