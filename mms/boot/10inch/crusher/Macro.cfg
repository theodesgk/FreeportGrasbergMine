#!/psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-2011
 *               All Rights Reserved
 *  $RCSfile: Macro.cfg,v $
 * $Revision: 1.5 $
 *   $Author: dcitron $
 *     $Date: 2012/02/27 08:54:06 $
 *    $State: Exp $
 * * * * * * * * * * * * * * * * * * *
 */

/* w0 */
symbol	CrUpdtInt	300
macro	GetTrksEnRoute	EQ-REQ "inform" [ "1" ]
macro	GetTonsPerHour	EQ-REQ "inform" [ "2" ]
macro	GetTonsLastHour	EQ-REQ "inform" [ "3" ]
macro	GetTotalTons	EQ-REQ "inform" [ "4" ]
macro	GetLdrShvFeed	EQ-REQ "inform" [ "5" ]
macro	GetDumpQueue	EQ-REQ "inform" [ "6" ]
macro	GetLdTnsUpdate	EQ-REQ "inform" [ "7" ];ne? $(CrUpdtInt) 0 WinMgr after:$(CrUpdtInt):GetLdTnsUpdate
macro	doBayInfo	GetTonsPerHour;GetTonsLastHour;GetDumpQueue
macro	doTrucksEnRoute	GetTrksEnRoute
macro	doShovelsFeed	GetLdrShvFeed
macro	ClassPowerUp	GetLdTnsUpdate

/* Status */
symbol	hasbays
symbol	curBay
symbol	bayStatus
macro	SendBayStatus	eq? $(hasbays) 1 EQ-REQ $(bayStatus) [ "$(curBay)" "$1" ];ne? $(hasbays) 1 sendUp
macro	doReady		bayStatus ready;SendBayStatus
macro	doDown		bayStatus down;SendBayStatus
macro	doDelay		bayStatus delay;SendBayStatus
macro	doStandby	bayStatus standby;SendBayStatus
macro	SelectBay	curBay $1;PostDynamicMenu "Status"
macro	doBayStatus	eq? $(hasbays) 1 PostDynamicMenu "Bays" "SelectBay";ne? $(hasbays) 1 doStatus

/* KSTATE */
symbol	ksargs	3

#define LANG_FILE	<10inch/crusher/LANGUAGE/Macro.cfg>
#include LANG_FILE
