%! /psw/cpp
/*
 * * * * * * * * * * * * * * * * * * *
 *  DISPATCH Real-Time Firmware Module
 * Copyright (c) Modular Mining Systems, 1982-2009
 *               All Rights Reserved
 *  $RCSfile: Macro.cfg,v $
 * $Revision: 1.6 $
 *   $Author: gsousa $   
 *     $Date: 2019/03/22 15:45:50 $
 *    $State: Exp $
 *   Purpose: Macro configuration file for Mobile Monitor
 * * * * * * * * * * * * * * * * * * *
 */
#  include <MobileMonitor/MobileMonitor_config.cfg>


symbol availDriver
symbol driverList
symbol mmInit           0
symbol mmdebug		0
symbol count		0
symbol engVal           0
symbol mmInfoArg1
symbol mmInfoArg2
symbol mmInfoArg3
symbol mmInfoArg4
symbol mmInfoArg5
symbol mmInfoArg6
symbol mmInfoArg7

########################
# Initialization
########################
in MMINFO 0xa001 b?ssssss HandleMMInfo

macro HandleMMInfo mmInfoArg1 $1; mmInfoArg2 $2; mmInfoArg3 $3;\
                   mmInfoArg4 $4; mmInfoArg5 $5; mmInfoArg6 $6;\
                   mmInfoArg7 $7; 

macro mmMain    ne? $(mmInit) 1 initMM; foreach $(mmMon); do \$2.mobilemon;

macro doInit    checkDrivers; init_mmMon; mmInit 1;


macro waitOnInit count $(+ $(count) 1);

macro initMM	eq? $(count) 2 doInit;\
                ne? $(count) 2 waitOnInit;

macro checkDrivers driverList $(adap driverIds); foreach $(driverList); do getDriverId;

macro getDriverId  eq? $2 $(VIMS_GEN_DRIVER_ID) vimsGenSetts;\
                   eq? $2 $(VIMS_797B_DRIVER_ID) vims797BSetts;\
                   eq? $2 $(VIMS_785B_DRIVER_ID) vims785BSetts;\
                   eq? $2 $(VIMS_785C_DRIVER_ID) vims785CSetts;\
                   eq? $2 $(VIMS_789B_DRIVER_ID) vims789BSetts;\
                   eq? $2 $(VIMS_789B0700_DRIVER_ID) vims789B0Setts;\
                   eq? $2 $(VIMS_793B_DRIVER_ID) vims793BSetts;\
                   eq? $2 $(VIMS_793C_DRIVER_ID) vims793CSetts;\
                   eq? $2 $(VIMS_793C0700_DRIVER_ID) vims793C0Setts;\
                   eq? $2 $(VIMS_994D_DRIVER_ID) vims994DSetts;\
                   eq? $2 $(VIMS_793D_DRIVER_ID) vims793DSetts;\
                   eq? $2 $(VIMS_797A_DRIVER_ID) vims797ASetts;\
                   eq? $2 $(VIMS_994_DRIVER_ID) vims994Setts;\
                   eq? $2 $(VIMS_994F_DRIVER_ID) vims994FSetts;\
                   eq? $2 $(VIMS_797F_DRIVER_ID) vims797FSetts;\
                   eq? $2 $(VIMS_854G_DRIVER_ID) vims854GSetts;\
                   eq? $2 $(VIMS_GUARDIAN_DRIVER_ID) vimsGuardianSetts;\
                   eq? $2 $(VIMS_793F_DRIVER_ID) vims793FSetts;\
                   eq? $2 $(VIMS_789C_DRIVER_ID) vims789CSetts;\
                   eq? $2 $(VIMS_993F_DRIVER_ID) vims993FSetts;\
                   eq? $2 $(VIMS_777D_DRIVER_ID) vims777DSetts;\
                   eq? $2 $(VIMS_777F_DRIVER_ID) vims777FSetts;\
                   eq? $2 $(VIMS_854K_DRIVER_ID) vims854KSetts;\
                   eq? $2 $(VIMS_992_DRIVER_ID) vims992Setts;\
                   eq? $2 $(CENSE_DEVICE1_DRIVER_ID) censeD1Setts;\
                   eq? $2 $(CENSE_DEVICE2_DRIVER_ID) censeD2Setts;\
                   eq? $2 $(STATEX_GEN_DRIVER_ID) statexGenSetts;\
                   eq? $2 $(PLM_GEN_DRIVER_ID) plmGenSetts;\
                   eq? $2 $(VHMS_D475_DRIVER_ID) vhmsD475Setts;\
                   eq? $2 $(VHMS_D375_DRIVER_ID) vhmsD375Setts;\
                   eq? $2 $(VHMS_830E_DRIVER_ID) vhms830ESetts;\
                   eq? $2 $(VHMS_930E_DRIVER_ID) vhms930ESetts;\
                   eq? $2 $(VHMS_WA1200_DRIVER_ID) vhmsWA1200Setts;\
                   eq? $2 $(VHMS_730E_DRIVER_ID) vhms730ESetts;\
                   eq? $2 $(VHMS_HD785_DRIVER_ID) vhmsHD785Setts;\
                   eq? $2 $(VHMS_HD1500_DRIVER_ID) vhmsHD1500Setts;\
                   eq? $2 $(VHMS_WA800_DRIVER_ID) vhmsWA800Setts;\
                   eq? $2 $(VHMS_PC1250_DRIVER_ID) vhmsPC1250Setts;\
                   eq? $2 $(VHMS_960E_DRIVER_ID) vhms960ESetts;\
                   eq? $2 $(VHMS_HD465_DRIVER_ID) vhmsHD465Setts;\
                   eq? $2 $(VHMS_PC2000_DRIVER_ID) vhmsPC2000Setts;\
                   eq? $2 $(VHMS_PC3000_DRIVER_ID) vhmsPC3000Setts;\
                   eq? $2 $(VHMS_WA600_DRIVER_ID) vhmsWA600Setts;\
                   eq? $2 $(VHMS_WD600_DRIVER_ID) vhmsWD600Setts;\
                   eq? $2 $(VHMS_960E1K_DRIVER_ID) vhms960E1KSetts;\
                   eq? $2 $(KOMTRAX_860E_DRIVER_ID) komtrax860ESetts;\ 
                   eq? $2 $(KOMTRAXJ1939_DRIVER_ID) komtraxJ1939Setts;\
                   eq? $2 $(MCC_GEN_DRIVER_ID) mccGenSetts;\
                   eq? $2 $(PLMJ1939_GEN_DRIVER_ID) plmJ1939GenSetts;\


macro vimsGenSetts	availDriver $(availDriver) $(VIMS_GEN_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
          		ENGINE_STATUS 83951636; adap request:$(VIMS_GEN_ENGRPM_PAR_MCID);\
			CARRY_BACK 83952460; adap request:$(VIMS_GEN_CB_PAR_MCID);

macro vims797BSetts     availDriver $(availDriver) $(VIMS_797B_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84017172; adap request:$(VIMS_797B_ENGSPD_PAR_MCID);\
			CARRY_BACK 84017996; adap request:$(VIMS_797B_CB_PAR_MCID);

macro vims785BSetts     availDriver $(availDriver) $(VIMS_785B_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84082708; adap request:$(VIMS_785B_ENGSPD_PAR_MCID);\
			CARRY_BACK 84083532; adap request:$(VIMS_785B_CB_PAR_MCID);

macro vims785CSetts     availDriver $(availDriver) $(VIMS_785C_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84148244; adap request:$(VIMS_785C_ENGSPD_PAR_MCID);\
			CARRY_BACK 84149068; adap request:$(VIMS_785C_CB_PAR_MCID);

macro vims789BSetts     availDriver $(availDriver) $(VIMS_789B_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84213780; adap request:$(VIMS_789B_ENGSPD_PAR_MCID);\
			CARRY_BACK 84214604; adap request:$(VIMS_789B_CB_PAR_MCID);

macro vims789B0Setts    availDriver $(availDriver) $(VIMS_789B0700_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84279316; adap request:$(VIMS_789B0700_ENGSPD_PAR_MCID);\
			CARRY_BACK 84280140; adap request:$(VIMS_789B0700_CB_PAR_MCID);\

macro vims793BSetts     availDriver $(availDriver) $(VIMS_793B_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84344852; adap request:$(VIMS_793B_ENGSPD_PAR_MCID);\
			CARRY_BACK 84345676; adap request:$(VIMS_793B_CB_PAR_MCID);

macro vims793CSetts     availDriver $(availDriver) $(VIMS_793C_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84410388; adap request:$(VIMS_793C_ENGSPD_PAR_MCID);\
			CARRY_BACK 84411212; adap request:$(VIMS_793C_CB_PAR_MCID);

macro vims793C0Setts    availDriver $(availDriver) $(VIMS_793C0700_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84475924; adap request:$(VIMS_793C0700_ENGSPD_PAR_MCID);\
			CARRY_BACK 84476748; adap request:$(VIMS_793C0700_CB_PAR_MCID);

macro vims994DSetts     availDriver $(availDriver) $(VIMS_994D_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84541460; adap request:$(VIMS_994D_ENGSPD_PAR_MCID);\
			CARRY_BACK 84542284; adap request:$(VIMS_994D_CB_PAR_MCID);

macro vims793DSetts     availDriver $(availDriver) $(VIMS_793D_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84606996; adap request:$(VIMS_793D_ENGSPD_PAR_MCID);\
			CARRY_BACK 84607820; adap request:$(VIMS_793D_CB_PAR_MCID);

macro vims797ASetts     availDriver $(availDriver) $(VIMS_797A_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84672532; adap request:$(VIMS_797A_ENGSPD_PAR_MCID);\
			CARRY_BACK 84673356; adap request:$(VIMS_797A_CB_PAR_MCID);

macro vims994Setts      availDriver $(availDriver) $(VIMS_994_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84738068; adap request:$(VIMS_994_ENGSPD_PAR_MCID);\
			CARRY_BACK 84738892; adap request:$(VIMS_994_CB_PAR_MCID);

macro vims994FSetts     availDriver $(availDriver) $(VIMS_994F_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84803604; adap request:$(VIMS_994F_ENGSPD_PAR_MCID);\
			CARRY_BACK 84804428; adap request:$(VIMS_994F_CB_PAR_MCID);

macro vims797FSetts     availDriver $(availDriver) $(VIMS_797F_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84869140; adap request:$(VIMS_797F_ENGRPM_PAR_MCID);\
			CARRY_BACK 84869964; adap request:$(VIMS_797F_CB_PAR_MCID);

macro vims854GSetts     availDriver $(availDriver) $(VIMS_854G_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 84934676; adap request:$(VIMS_854G_ENGSPD_PAR_MCID);\
			CARRY_BACK 84935500; adap request:$(VIMS_854G_CB_PAR_MCID);

macro vimsGuardianSetts availDriver $(availDriver) $(VIMS_GUARDIAN_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85000212; adap request:$(VIMS_GUARDIAN_ENGSPD_PAR_MCID);\
			CARRY_BACK 85001036; adap request:$(VIMS_GUARDIAN_CB_PAR_MCID);

macro vims793FSetts     availDriver $(availDriver) $(VIMS_793F_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85065748; adap request:$(VIMS_793F_ENGRPM_PAR_MCID);\
			CARRY_BACK 85066572; adap request:$(VIMS_793F_CB_PAR_MCID);

macro vims789CSetts     availDriver $(availDriver) $(VIMS_789C_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85131284; adap request:$(VIMS_789C_ENGRPM_PAR_MCID);\
			CARRY_BACK 85132108; adap request:$(VIMS_789C_CB_PAR_MCID);

macro vims993FSetts     availDriver $(availDriver) $(VIMS_993F_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85196820; adap request:$(VIMS_993F_ENGRPM_PAR_MCID);\
			CARRY_BACK 85197644; adap request:$(VIMS_993F_CB_PAR_MCID);

macro vims777DSetts     availDriver $(availDriver) $(VIMS_777D_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85262356; adap request:$(VIMS_777D_ENGRPM_PAR_MCID);\
			CARRY_BACK 85263180; adap request:$(VIMS_777D_CB_PAR_MCID);

macro vims777FSetts     availDriver $(availDriver) $(VIMS_777F_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85327892; adap request:$(VIMS_777F_ENGRPM_PAR_MCID);\
			CARRY_BACK 85328716; adap request:$(VIMS_777F_CB_PAR_MCID);

macro vims854KSetts     availDriver $(availDriver) $(VIMS_854K_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85393428; adap request:$(VIMS_854K_ENGSPD_PAR_MCID);\
			CARRY_BACK 85394252; adap request:$(VIMS_854K_CB_PAR_MCID);

macro vims992Setts      availDriver $(availDriver) $(VIMS_992_DRIVER_ID); DIPPER_EVENT $(VIMS_DIPPER_EVT);\
                        ENGINE_STATUS 85458964; adap request:$(VIMS_992_ENGSPD_PAR_MCID);\
			CARRY_BACK 85459788; adap request:$(VIMS_992_CB_PAR_MCID);

macro censeD1Setts      availDriver $(availDriver) $(CENSE_DEVICE1_DRIVER_ID);\
                        ENGINE_STATUS 117506054; adap request:$(CENSE_DEVICE1_ENGSPD_PAR_MCID);

macro censeD2Setts      availDriver $(availDriver) $(CENSE_DEVICE2_DRIVER_ID);\
                        ENGINE_STATUS 117581590; adap request:$(CENSE_DEVICE2_ENGSPD_PAR_MCID);

macro statexGenSetts    availDriver $(availDriver) $(STATEX_GEN_DRIVER_ID);\
                        ENGINE_STATUS 50397205; adap request:$(STATEX_GEN_ENGSPD_PAR_MCID);

macro plmGenSetts       availDriver $(availDriver) $(PLM_GEN_DRIVER_ID); DIPPER_EVENT 33619968;\
			CARRY_BACK 33619997; adap request:$(PLM_GEN_CB_PAR_MCID);

macro vhmsD475Setts     availDriver $(availDriver) $(VHMS_D475_DRIVER_ID);\
                        ENGINE_STATUS 369231828; adap request:$(VHMS_D475_ENGSPD_PAR_MCID);

macro vhmsD375Setts     availDriver $(availDriver) $(VHMS_D375_DRIVER_ID);\
                        ENGINE_STATUS 369298364; adap request:$(VHMS_D375_ENGSPD_PAR_MCID);

macro vhms830ESetts     availDriver $(availDriver) $(VHMS_830E_DRIVER_ID);\
                        ENGINE_STATUS 369364973; adap request:$(VHMS_830E_ENGSPD_PAR_MCID);

macro vhms930ESetts     availDriver $(availDriver) $(VHMS_930E_DRIVER_ID);\
                        ENGINE_STATUS 369431490; adap request:$(VHMS_930E_ENGSPD_PAR_MCID);

macro vhmsWA1200Setts   availDriver $(availDriver) $(VHMS_WA1200_DRIVER_ID);\
                        ENGINE_STATUS 369497972; adap request:$(VHMS_WA1200_ENGSPD_PAR_MCID);

macro vhms730ESetts     availDriver $(availDriver) $(VHMS_730E_DRIVER_ID);\
                        ENGINE_STATUS 369631044; adap request:$(VHMS_730E_ENGSPD_PAR_MCID);

macro vhmsHD785Setts    availDriver $(availDriver) $(VHMS_HD785_DRIVER_ID);\
                        ENGINE_STATUS 369697580; adap request:$(VHMS_HD785_ENGSPD_PAR_MCID);

macro vhmsHD1500Setts   availDriver $(availDriver) $(VHMS_HD1500_DRIVER_ID);\
                        ENGINE_STATUS 369764116; adap request:$(VHMS_HD1500_ENGSPD_PAR_MCID);

macro vhmsWA800Setts    availDriver $(availDriver) $(VHMS_WA800_DRIVER_ID);\
                        ENGINE_STATUS 369830652; adap request:$(VHMS_WA800_ENGSPD_PAR_MCID);

macro vhmsPC1250Setts   availDriver $(availDriver) $(VHMS_PC1250_DRIVER_ID);\
                        ENGINE_STATUS 369897188; adap request:$(VHMS_PC1250_ENGSPD_PAR_MCID);

macro vhms960ESetts     availDriver $(availDriver) $(VHMS_960E_DRIVER_ID);\
                        ENGINE_STATUS 369963797; adap request:$(VHMS_960E_ENGSPD_PAR_MCID);

macro vhmsHD465Setts    availDriver $(availDriver) $(VHMS_HD465_DRIVER_ID);\
                        ENGINE_STATUS 370030260; adap request:$(VHMS_HD465_ENGSPD_PAR_MCID);

macro vhmsPC2000Setts   availDriver $(availDriver) $(VHMS_PC2000_DRIVER_ID);\
                        ENGINE_STATUS 370096796; adap request:$(VHMS_PC2000_ENGSPD_PAR_MCID);

macro vhmsPC3000Setts   availDriver $(availDriver) $(VHMS_PC3000_DRIVER_ID);\
                        ENGINE_STATUS 370163332; adap request:$(VHMS_PC3000_ENGSPD_PAR_MCID);

macro vhmsWA600Setts    availDriver $(availDriver) $(VHMS_WA600_DRIVER_ID);\
                        ENGINE_STATUS 370429476; adap request:$(VHMS_WA600_ENGSPD_PAR_MCID);

macro vhmsWD600Setts    availDriver $(availDriver) $(VHMS_WD600_DRIVER_ID);\
                        ENGINE_STATUS 370496012; adap request:$(VHMS_WD600_ENGSPD_PAR_MCID);

macro vhms960E1KSetts   availDriver $(availDriver) $(VHMS_960E1K_DRIVER_ID);\
                        ENGINE_STATUS 370562548; adap request:$(VHMS_960E1K_ENGSPD_PAR_MCID);

macro komtrax860ESetts	availDriver $(availDriver) $(KOMTRAX_860E_DRIVER_ID);\
                        ENGINE_STATUS 371893268; adap request:$(KOMTRAX_860E_ENGSPD_PAR_MCID);

macro komtraxJ1939Setts	availDriver $(availDriver) $(KOMTRAXJ1939_DRIVER_ID);\
                        ENGINE_STATUS 1627455494; adap request:$(KOMTRAXJ1939_ENGSPD_PAR_MCID);

macro mccGenSetts       availDriver $(availDriver) $(MCC_GEN_DRIVER_ID);\
			CARRY_BACK 1694564354; adap request:$(MCC_GEN_CB_PAR_MCID);

macro plmJ1939GenSetts  availDriver $(availDriver) $(PLMJ1939_GEN_DRIVER_ID);\
			CARRY_BACK 1644232741; adap request:$(PLMJ1939_GEN_CB_PAR_MCID);

macro sendEngStatVal    VS-EVENT 16842753 $(engVal)

symbol carry_back
#if #arch(pe)
macro requestCarrybackVal carry_back $(adap paramVal:$(CARRY_BACK));\
                          ne? $(carry_back) N/A sendCarrybackVal
#else
macro requestCarrybackVal adap paramVal $(CARRY_BACK);\
			  carry_back $(adap paramVal);\
			  ne? "$(carry_back)" "NO VALUE!" sendCarrybackVal
#endif
macro sendCarrybackVal VS-EVENT 16842754 $(carry_back)

out   VS-EVENT		0x0772   l?fddd   sendto up
