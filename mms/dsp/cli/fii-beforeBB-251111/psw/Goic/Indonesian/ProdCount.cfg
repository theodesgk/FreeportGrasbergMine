/* Support for GC load counting */
symbol	dmp
symbol	shovel
symbol	inlist
symbol	dumplist	''
symbol	shovellist	''
symbol	e1	''
symbol	d1	''
symbol	u1	''
symbol	id1	''
symbol	saclamb	''
symbol	excdmplist ''
macro	cre8symbol	Macro symbol $(saclamb) 0
macro	resolvloc	eq? $(u1) 2 chkshovel;eq? $(u1) 3 chkdump;eq? $(u1) 4 chkdump;eq? $(u1) 5 chkdump
macro	chkdump		inlist 0;foreach $(excdmplist);do eq? \$2 $(shovel).$(id1) inlist 1;dmp $(id1);eq? $(inlist) 0 defined_shovel
macro	chkshovel	inlist 0;foreach $(excdmplist);do eq? \$2 $(id1).$(dmp) inlist 1;shovel $(id1);eq? $(inlist) 0 defined_dump
macro	defined_dump	ne? "$(dmp)" "" addexcdump
macro	defined_shovel	ne? "$(shovel)" "" addexcdump
macro	addexcdump	excdmplist $(excdmplist) $(shovel).$(dmp);saclamb $(shovel).$(dmp);cre8symbol
macro	zeroexcdump	excdmplist ''
macro	add2dump	trk.$(shovel).$(dmp) $(+ $(trk.$(shovel).$(dmp)) 1)
macro	reportgen	foreach $(excdmplist);do repact
macro	repact	KDISP	$2 $(Macro $2) 
macro	excmenu	KMENU Shovels $(shovellist) "Exit"
macro	dmpmenu	KMENU Dumps $(dumplist) "Exit"
macro	shovel2list	shovellist $(shovellist) $(shovel);id1 $(shovel);chkshovel
macro	dump2list	dumplist $(dumplist) $(dmp);id1 $(dmp);chkdump
symbol nextact.0 4
symbol	nextact.1	2
symbol	nextact.2	6
symbol	nextact.3	2
symbol	nextact.4	2
symbol	nextact.5	2
symbol	nextact.6	7
symbol	nextact.7	8
symbol	nextact.8	9
symbol	nextact.9	10
symbol	nextact.10	6
macro	loc.0	shovel
macro	loc.1	dmp
macro	kpAssign	tray $(tray.$(tray));KSTATE $(nextact.$(state)) $(loc.$(tray));dumpcount;cyclecount
macro	kpArrive	eq? $(tray) 0 state 7;eq? $(tray) 1 state 10;KSTATE $(state) $(loc.$(tray))
macro	kpFull	tray $(tray.$(tray));KSTATE $(nextact.$(state)) $(loc.$(tray));shovelcount
macro	kpLoad	KSTATE $(nextact.$(state)) $(loc.$(tray))
macro	kpLogOn	Ku label:'Masukkan Nama' action:'KSTATE $(nextact.$(state)) " " " "  "Selamat Datang \$(Kp2.D label)"' post	
macro	kpDown	KSTATE 5
macro	kpLogOff	Kp label:"Log Off" action:'KSTATE 0 " " " " "Good Bye, Drive Home Safely"' post
macro	kpSpare	KSTATE 5
macro	kpDelay	KSTATE 1
macro	kpReady KSTATE 2
macro	shovelcount	$(shovel) $(+ $(Macro $(shovel)) 1 )
macro	dumpcount	$(dmp) $(+ $(Macro $(dmp)) 1 )
macro	cyclecount	$(shovel).$(dmp) $(+ $(Macro $(shovel).$(dmp)) 1 )
symbol	tray	0
symbol	tray.0	1
symbol	tray.1	0
in	KSTATE	0x041	b?sss	state $1;loc $2;w0.Icon icon:$(icon.$1);w0.v1 label:$(msg.$1);w0.v2 label:$(goicstate.$1);w0.Text write:$4\n
macro	MoreDumps	tray 1;loc $1
/* macro	doAct	tray 0;loc $1 */
macro	doReq	eq? $(req) "sass" assignshovel;eq? $(req) "dass" assigndump
macro	assignshovel	tray 0;shovel $(ob1);KSTATE 6 $(ob1)
macro	assigndump	tray 1;dmp $(ob1);KSTATE 9 $(ob1)
in	DOWN	0x0a	d	KSTATE 1 $(loc) " " " " DOWN, Please Logon
in	STANDBY	0x0b	d	KSTATE 4 $(loc)
in	DELAY	0x09	d	KSTATE 4 $(loc)	
/* out	LD-REPT	0x0a2	ssd	sendto	up */
